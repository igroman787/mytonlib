#!/usr/bin/env python3
# -*- coding: utf_8 -*-

import sys
import json
import time
from .adnl import AdnlTcpClient, AdnlUdpClient
from .balancer import AdnlTcpClientWithBalancer
from .mytypes import Cell, Slice, Dict
from .scanner import TonBlocksScanner
from .boc import deserialize_boc
from .tvm.tvm import TVM
from .tlb import TlbSchemes


def test_lite_client():
	"""
	Test commands from lite-client
	"""

	global_config_url = "https://ton-blockchain.github.io/global.config.json"
	adnl = AdnlTcpClientWithBalancer(global_config_url)

	# time - Get server time
	data = adnl.get_time()
	print("get_time:", json.dumps(data, indent=4))

	# last - Get last block and state info from server
	mc_info = adnl.get_masterchain_info()
	print("get_masterchain_info:", json.dumps(mc_info, indent=4))
	print(f"mc_info.last.seqno: {mc_info.last.seqno}")

	# getaccount - Loads the most recent state of specified account
	data = adnl.get_account_state("EQCD39VS5jcptHL8vMjEXrzGaRcCVYto7HUn4bpAOg8xqB2N")
	print("get_account_state:", json.dumps(data, indent=4))
	
	# runmethod - Runs GET method <method-id> of account <addr> with specified parameters
	data = adnl.run_smc_method("EQCD39VS5jcptHL8vMjEXrzGaRcCVYto7HUn4bpAOg8xqB2N", "seqno")
	print("run_smc_method:", json.dumps(data, indent=4))
	
	# dnsresolve - Resolves a domain starting from root dns smart contract
	#*
	
	# dnsresolvestep - Resolves a subdomain using dns smart contract <addr>
	
	
	# allshards - Shows shard configuration from the most recent masterchain state or from masterchain state corresponding to <block-id-ext>
	data = adnl.get_all_shards_info()
	print("get_all_shards_info:", json.dumps(data, indent=4))
	
	# getconfig [<param>...]  Shows specified or all configuration parameters from the latest masterchain state
	data = adnl.get_config_params(4)
	print("get_config_params:", json.dumps(data, indent=4))
	
	# gethead - Shows block header for <block-id-ext>
	data = adnl.get_block_header()
	print("get_block_header:", json.dumps(data, indent=4))
	
	# getblock - Downloads block
	block_info = adnl.get_block()
	print("get_block:", json.dumps(block_info, indent=4))
	
	# DELETE
	# getstate - Downloads state corresponding to specified block
	#data = adnl.get_state()
	#print("get_state:", json.dumps(data, indent=4))
	
	# lasttrans - Shows or dumps specified transaction and several preceding ones
	data = adnl.get_last_transactions("EQCD39VS5jcptHL8vMjEXrzGaRcCVYto7HUn4bpAOg8xqB2N", 1)
	print("get_last_transactions:", json.dumps(data, indent=4))
	
	# listblocktrans - Lists block transactions, starting immediately after or before the specified one
	block_trans = adnl.get_block_transactions(mc_info.last)
	print("get_block_transactions:", json.dumps(block_trans, indent=4))
	
	# dumptrans - Dumps one transaction of specified account
	account_id = {"workchain": mc_info.last.workchain, "id": block_trans[0].account}
	data = adnl.get_one_transaction(mc_info.last, account_id, block_trans[0].lt)
	print("get_one_transaction:", json.dumps(data, indent=4))
	
	# byseqno - Looks up a block by workchain, shard and seqno, and shows its header
	data = adnl.lookup_block(mc_info.last.workchain, mc_info.last.shard, mc_info.last.seqno-10)
	print("byseqno:", json.dumps(data, indent=4))
	
	# bylt - Looks up a block by workchain, shard and logical time, and shows its header
	data = adnl.lookup_block(mc_info.last.workchain, mc_info.last.shard, lt=block_info.info.start_lt)
	print("bylt:", json.dumps(data, indent=4))
	
	# byutime - Looks up a block by workchain, shard and creation time, and shows its header
	data = adnl.lookup_block(mc_info.last.workchain, mc_info.last.shard, utime=block_info.info.gen_utime-100)
	print("byutime:", json.dumps(data, indent=4))
	
	# creatorstats - Lists block creator statistics by validator public key
	
	
	# recentcreatorstats - Lists block creator statistics updated after <start-utime> by validator public key
	
	
	# checkload - Checks whether all validators worked properly during specified time interval, and optionally saves proofs into <savefile-prefix>-<n>.boc
	#*
	
	# loadproofcheck - Checks a validator misbehavior proof previously created by checkload
	#*
	
	# pastvalsets     Lists known past validator set ids and their hashes
	
	
	# savecomplaints - Saves all complaints registered for specified validator set id into files <filename-pfx><complaint-hash>.boc
	#*
	
	# complaintprice - Computes the price (in nanograms) for creating a complaint
	
	
	# sendfile - Load a serialized message from <filename> and send it to server
	body = bytes.fromhex("b5ee9c7241010101000e0000180000000400000000628f328d83ad456c")
	data = adnl.send_ext_msg(body)
	print("send_ext_msg:", json.dumps(data, indent=4))
#end define

def test_udp():
	host = "172.104.59.125"
	port = 14432
	pubkey = "/YDNd+IwRUgL0mq21oC0L3RxrS8gTu0nciSPUrhqR78="
	
	adnl = AdnlUdpClient()
	adnl.connect(host, port, pubkey)
#end defines

def test_cell():
	cell = Cell()
	cell.data = bytes.fromhex("010203")
	cell.bits_len = len(cell.data) * 8
	print("cell:", cell)
	print("cell_json:", json.dumps(cell, indent=4))
	
	slice = Slice(cell)
	print("slice:", slice)
	print("slice_json:", json.dumps(slice, indent=4))
	
	r1 = slice.compare_byte_prefix("01", move_pos=True)
	r2 = slice.compare_byte_prefix("02", move_pos=False)
	print(f"is slice has prefix `01`: {r1}")
	print(f"is slice has prefix `02`: {r2}")
	print(f"slice: {slice}")
#end define

def test_config(papam=32):
	global_config_url = "https://ton-blockchain.github.io/global.config.json"
	adnl = AdnlTcpClientWithBalancer(global_config_url)
	
	data = adnl.get_config_params(papam)
	print("get_config_params:", json.dumps(data, indent=4))
#end define

def test_run_smc_method():
	global_config_url = "https://ton-blockchain.github.io/global.config.json"
	adnl = AdnlTcpClientWithBalancer(global_config_url)
	
	data = adnl.run_smc_method("kQBL2_3lMiyywU17g-or8N7v9hDmPCpttzBPE2isF2GTziky", "mult", [5, 4])
	print("run_smc_method:", data)

	tlb_schemes = TlbSchemes()
	tlb_schemes.load_schemes("/usr/src/ton/tl/generate/scheme/")
	
	tlb_schemes.load_schemes_from_text("mycell$_ value:uint64 = MyCell;")
	data = tlb_schemes.deserialize(data, expected="MyCell")
	print("data:", data)
	print("data.value:", data.value)
#end define

def test_run_smc_method2():
	global_config_url = "https://ton-blockchain.github.io/global.config.json"
	adnl = AdnlTcpClientWithBalancer(global_config_url)
	
	mc_info = adnl.get_masterchain_info()
	block_id_ext = adnl.lookup_block(workchain=mc_info.last.workchain, shard=mc_info.last.shard, utime=1677006000)
	data = adnl.run_smc_method("Ef9VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVbxn", "list_proposals", block_id_ext=block_id_ext)
	print("mc_info:", json.dumps(mc_info, indent=4))
	print("block_id_ext:", json.dumps(block_id_ext, indent=4))
	print("run_smc_method:", data)
#end define

def test_scanner():
	global_config_url = "/usr/bin/ton/local.config.json"
	#global_config_url = "https://ton-blockchain.github.io/global.config.json"
	#global_config_url = "https://ton-blockchain.github.io/testnet-global.config.json"
	#global_config_url = "https://igroman787.github.io/perfnet.config.json"
	adnl = AdnlTcpClientWithBalancer(global_config_url)
	scanner = TonBlocksScanner(adnl, sync=False)
	mc_info = adnl.get_masterchain_info()
	#scanner.set_start_block(-1, -9223372036854775808, 7850100) # boc error
	#scanner.set_start_block(-1, -9223372036854775808, 7850386) # start tps test
	#scanner.set_start_block(-1, -9223372036854775808, 28111292) # mainnet
	scanner.set_start_block(mc_info.last.workchain, mc_info.last.shard, mc_info.last.seqno-1000)
	scanner.run()
	
	old_blocks_num = 0
	old_trans_num = 0
	old_messages_num = 0
	while True:
		dtime = 60
		bps = round((scanner.blocks_num - old_blocks_num) /dtime, 2)
		tps = round((scanner.trans_num - old_trans_num) /dtime, 2)
		mps = round((scanner.messages_num - old_messages_num) /dtime, 2)
		old_blocks_num = scanner.blocks_num
		old_trans_num = scanner.trans_num
		old_messages_num = scanner.messages_num
		print(f"bps: {bps}, tps: {tps}, mps: {mps}. bnum:{scanner.blocks_num}, tnum: {scanner.trans_num}, mnum: {scanner.messages_num}")
		time.sleep(dtime)
#end define

def test_proposals_list():
	global_config_url = "/usr/bin/ton/global.config.json"
	adnl = AdnlTcpClientWithBalancer(global_config_url)
	
	mc_info = adnl.get_masterchain_info()
	block_id_ext = adnl.lookup_block(workchain=mc_info.last.workchain, shard=mc_info.last.shard, seqno=28391437)
	data = adnl.run_smc_method("Ef9VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVbxn", "list_proposals", block_id_ext=block_id_ext)
	print("mc_info:", json.dumps(mc_info, indent=4))
	print("block_id_ext:", json.dumps(block_id_ext, indent=4))
	print("run_smc_method:", data)
#end define

def test_boc():
	boc1 = bytes.fromhex("b5ee9c72e202014a000100002a6b0000002400cc00ea0180026202fe033003520361037a0394048c04fc051605be05fe06f0076007ac0854089408fe094b09960a620a820b180b360b540b720b900bae0bcc0bea0c080c260c440cf20d160d3a0de60e060e260e460e640e820e9e0eba0ed60ef20f0e0fb41038105c107c10c81114113411541174119211b211d211f212121232125212fc138413e613f81476149414b214d014ec15901610161e162c163a16481656166416721680168e169c16aa16f6170417121720172e173c174a175817661774178217ce17dc17ea17f81806181418221830187c18a018c4191119bc19dc19fc1a491a951ab41ad21b1f1b6b1b881ba41bf11c3d1c581c741cc11d0d1d281d751d901e361e831f061f531fa51ff02010205d20a920c820e821352154217221bf21de222b224a226a22b722d62323236f238e23db23fa24a424f1257825c526262673268426d1274e279b27b828052822286f288c28d92925294029e42a312ab02afd2b492b952be12cac2cf92d182d262d732d902ddd2dfa2e472e642eb12ece2f1b2f382f852fa22fef300c3059307630c330e0312d314a319731b432623310331e33b433c2340f341c3469347634c334d0351d352a3577358435d135de362b36383685369236df36ec373937b03866387438c138ce38dc38ea393739833990399e39eb3a373a443a523a9f3aac3af93b063b533b9f3bac3c623c703d243dd83de63e333e403e8d3e9a3ee73f333f403f8d3f9a3fa83ff54041404e405c40a940b6416c4222423042e442f243a6445a4466446c44ba44e245364543458645904674468c469a46a946b846c8476c481448bc48c848d4495a4a1a4aa04ab24b564c174c204ca64cc24d734e144e204e2c4eb24f724ff8500a50ca51505162520752755334533b53c153d2547654d7041011ef55aaffffff11000100020003000401a09bc7a98700000000040101696c140000000100ffffffff0000000000000000632a155700001c88059857c000001c88059857c4c027bf420005693401696c110169645cc400000003000000000000002e00050211b8e48dfb4a35791a44000600070a8a04a893f90761c3528acbec05c0bee677451e015d59296bab513f9f6f4e4d863c2f5c261665a2ad4980524b6f25e0dbd8ca0ed5760fb69e488eea56c238c612b296016e016e000b000c1489cf4c97e523170830372d895f725312c3597e33da831f3dc144623deeaf2cd93900084a33f6fdce432e7267fe17b5d5dc0b1237d92b8cf2bdca45d925c69a4395a8088298df29a34f919fb8d00d344b3421c92679ec1ebb444d7093bebb5dd13075019854fd93c0011b011c011d011e009800001c880589158401696c13a844436ae5d8bda80868a05a061a2d86323220e08249293d915805d944b9243796be33bda64aa44dac4602e96f76c7e25fb44815cecfb8e5616f6c961a58bc66022581fa70fb1404054a5c0fd387d8f1cbf324c00800080008001d43e03a0a4251abc8d211954fc400080201200009000a0015be000003bcb355ab466ad00015bfffffffbcbd0efda563d0345ba893f90761c3528acbec05c0bee677451e015d59296bab513f9f6f4e4d863c2f4138d30f991d6f321fc0e454bec4a5f58334b6b969e558f62914dcf893935e6e016e00149023afe2ffffff1100ffffffff000000000000000001696c1300000001632a155300001c880589158401696c0e600012001300140015245b9023afe2ffffff1100ffffffff000000000000000001696c1400000001632a155700001c88059857c401696c1160000d000e000f0010011100000000000000005000113213d99912bb6ff65e836aaf5a69c806568e6c878ca74cbd26a45d1c7194880970ce2491abc6b29c57aca78df614c22edc2b8ddee21ca0d088f08cfdd00840de739c016d00138207e9c3ec78e5f99270006d008b22330000000000000000ffffffffffffffff81fa70fb1e397e649828008b001634552e3e38b935f281104655b2e76cefadaef2743a77b54fc6fd9334832231e372754d0c9da37e09da7443dd1bdd0a401442b0811c2709121ff6707ef493e4f84441001b0011cc26aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaac232cfdca101f0237e012000b600b700b8006bb0400000000000000000b4b60a00000e4402c48ac1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc028480101e4950317a530e54fdac9112a6a9a87b6d9055b3a8d30b1a8802afc290f0b3912000132132246153229dca29b9d47eeed46efd482b42da79f972d0e3f48cac3ac56f682b571d0050fa7abcd7a3148f58e74e972a41e3be83fa3cb22052335ea771530c651016d00138207e9c3ec50101529700026008b22330000000000000000ffffffffffffffff81fa70fb1404054a5828008b00162455cc26aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaac232cfdc9bfa7a4b7e001700b6001800b828480101de5adf45c03a745fc9d3a418d9e2ba096db9c1aaa77bc0898b6d9ebb611d2b400005284801015ca4e8215b6668e8c2441ba5063d91c30e88a8c3c76bfddd425e666bf912e20f000222bf0001160c6a16000569346000039100af3a68880000e43c24e296200b4b22e4796fc4ec243fb2fddf46ce115effefd5bb9af7df7ac5ef7c9703e7bcb929c3da260e902c842df1bb88fb0462fbc104fb2acec96c7ae9f60a96baede1e021f8b8be0019001a2213c3c0000722015e74d12000bb001b32013e067cf0e3d7b078183fa6b9671098f1c81ffa79b68c2f0678fa3f09bd1d93f009a3ab11c27e505bf034ce0d4d41419cb50e6978c3d3a6a66be764f77294f60d0010000b20004e004f2211480000e4402bce9a2400bd001c22112000039100af3a689000bf001d2211480000e4402bce9a2400c1001e221162000039100af3a68900c3001f2211480000e4402bce9a2400c5002022112000039100af3a689000c700212211480000e4402bce9a2400c9002222110000039100af3a689000cb00232212ca00001c880579d34400cd0024221160000039100af3a68900cf002500a9400000e4402bce9a200000722015e74d1005a5b049220b53adcf6812cff79879b761c48ebd1249b7965eea78bf40e923838f7b634bd879a11242c9f755ae58d23e8eff9bb911afac437a66b91a05d1a37af7beece223130103f4e1f628080a94b80027006f008b231301022bca0b9c7ddaec5800280029008b331369f92c49cbcfca31f10e28d2a2b10b61566dc1ac6f35ee12b00d272e494a36219ef551faa999074dabb8548dd0accb9fab057353fdf907dd3329ac1b1e1c63ed0028001001016184008d5abf927800350036008b22130100ca460b0f231b59e8002a00732213010057e3ff3e92136a480074002b221301003d89e9e672e04668002c0077221100e0b017dc8a8c86880078002d221100e0a83ec160293328002e007b220f00c1453b688e1108007c002f220f00c02225548539e80030007f220f00c0221de12d664800800031220f4030085e7766c48a00820032220f00c02170f2223da800330085219dbceaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa818042d7630f048056c21a13239611fe81e8ba0d1bc58d679037f5f02e88740ba77a12ca6a695d8000039100b122b0700342277cff55555555555555555555555555555555555555555555555555555555555555554087ac12d66400000000000007220162456118042d7630f0495d000870088231301006843f2854366991800370038008b22130100f9400e081758f968008c003928480101f87f25a430cfa8abcfc1cdcd7578e635347b441e6a749147fe2f017f1241aca3002228480101b9119ab5deebe4611bcbeedc50a2c0180da4b6ba1c63dee3f33d4561ba314d14001922130100dfb4ea849ad33108003a008f22130100a921815012db8a48003b003c221301009271bf96b8ea13a80092003d221100f6afc1b959f176a8004800a922130100926199b55740cb480094003e2213010092619613c44950a8003f0097221301009261956a594d34a8004000992213010092607248aa6d6b88009a0041221301009260717aa39015e8009c004222130100926070d69fff43880043009f21a1bcd999999999999999999999999999999999999999999999999999999999999820124c0e1a8f1fa05941fae2917b72c2c2c864d59d00e747ad401b39c09c3c5091c004285a8a5330cc000039100b122b050044227bcff3333333333333333333333333333333333333333333333333333333333333333413a0c19daa0000000000000072201624560e0124c0e1a8f1fa0596d000a1004522556c05abc35f2d28c653f4265d7dcb8fc92bed13e967a0e185f076ece6d1737124680ec79228cc47939e7c7900a3004622058f632900a500472175a1f426c656f426000100005d7dcb8fc92bed13e967a0e185f076ece6d1737124680ec79228cc47939e7c7980211b20313a0e2b76056cc740e7774000a7221100f6a2a9ced4e78328004900ab221100ea5909416d750088004a00ad221100ea59006153ba044800ae004b220f00c03929383c0e08004c00b1219bbd62f8f7bea30f8ab5e9f16c3fb8642b118f56ed1bdc49600dbe5220c8b1af9e040c474f805753fba0a76497c7e3c7dca1a1f5112a96997997aebd1b2563e208e18645a48680000e4402c48ac1c0004d236fcff34517c7bdf5187c55af4f8b61fdc321588c7ab768dee24b006df29106458d7cf21881f4800000000000007220162456110311d3e017f000b300b400b5220120005000d6220120005a00ec220120005100d8220120005200da220120005300dc220120005400de220120005500e0220120005600e2220120005700e4220120005800e6220120005900e8284801016399760a68a2d391706536a6e23cc74949ce19f23b65802a6ce64b0e9e7a22920001220120005b005c220120005d00f02201200065010422012000f1005e220120005f00f422012000f50060220120006100f8220120006200fa220120006300fc22012000fd006428480101c370f43ccdc364d927d6b176b729ff73d93b6f9d3827efcf5e4a21259335fe400002220120006601062201200067010822012001090068220120010b0069220120006a010e220120010f006b220120006c0112284801019f962415fe4831d51e0afa498a47e15d8e9c23b4302b56eab7ad53cc2f2e2dee000423130103f4e1f63c72fcc938006e006f008b231301022bca0bb0e8cd20d800700071008b28480101467803045589340a8a4411ca40265b31e9acee0a296af9be2dfb9c712d0a5b9f016b3313e2447bd6595a4eac3b68a15d8998fcc00c4637f01d483c5ae64d571dbb6fd3320941a02b12a6f9e558722efbc94d94078633e9f4b9aa887d7e998a4202cbad0f002800100101618400a1c5b1c6f80089008a008b22130100ca460b0f231b59e8007200732213010057e3ff3e92136a480074007528480101da3328921f494abfa69b53e7493187c5f02dac635d6e4ab0e1dd1c38e078cd6d002628480101cc2d5190e7bfce02eecbe148008e84228f8fc904dc3a737c983dfd9da67437d7001a221301003d89e9e672e0466800760077221100e0b017dc8a8c86880078007928480101546a846cbf7bbba6842c30bba65f5d45476eff71308e8fb3ac20db58f6360576001b28480101a2bdfb247a2f156649f1dd7b9fd86f7386538a2877de3fc182eb5aea50fecd090018221100e0a83ec160293328007a007b220f00c1453b688e1108007c007d28480101e0f82f74fd9f84f9615796d34368b051ab48b7e15ad3a8713aac1535957eb656001528480101c49fef14c1eaf3003364ad665766f7e1aa6acc6b8e28e4924280e949bc5a79e80014220f00c02225548539e8007e007f220f00c0221de12d66480080008128480101eb38ef90c590bedb3ce31140d2d4176d43db6b7aab35df685afc4ccf2a383209000b284801019bec9db5132d5dedebf50496978e7145b363e1bd60739352ab08bd7a0af96c020010220f4030085e7766c48a0082008328480101a248b81f22333cc28f6b6744e4298aefcd9b6f2dc5d7c99e1da1b28c37f3aa0c0007220f00c02170f2223da800840085219dbceaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa818042d7630f0495b54d7818171871c601be3f50d7fa60902e4b536125b215a1ebd3298fc6ca852000039100b30af870086284801010143b3d2dd671b2559543155e003f847022e510b3a57afabbca05d4069c327ef000d2277cff55555555555555555555555555555555555555555555555555555555555555554087ac12d6640000000000000722016615f118042d7630f0495d0008700882848010164a43970f2007a1da6d6fc81773cc095d1cc270e81359e471f3b03469abeb7b5000c214900000027cbb9d1062954439a83a91f27835fb9d2e3e798910356650c3c493c94623464684000b628480101e137d8313020d900a920044f1d8543451924bc060cc6a2113813bd8a565d6be6002322130100f9400e1c824b2de8008c008d28480101a5a7d24057d8643b2527709d986cda3846adcb3eddc32d28ec21f69e17dbaaef000128480101bc54a2d4e4e6b4e58d084c3d5e103ed4546f4c86c09514107ae8e55476867d1a002322130100dfb4ea9905c56588008e008f22130100a92181647dcdbec800900091284801019a20d37c3a97abc5aea0a19be6c7f5be2fd007db7238ac35d99e74731abc4bdf0024221301009271bfab23dc482800920093221100f6afc1b959f176a800a800a928480101af2cafb67177843eda40c057ea91a41cc2d30c884dc41fc4fec1ea49541c6fbc001522130100926199c9c232ffc80094009528480101021ea9989b7f46eaf86ec202db2a1071491f8bf75a4055ef0826d2645cf1c8ba001422130100926196282f3b852800960097221301009261957ec43f69280098009928480101e4401b61eeda580799e82672f13b99895dfd6c90316dbfc24cca26830f4f240e0013221301009260725d155fa008009a009b28480101ef1aa8b2068cf6a8eadef8197235a5d5976865a32a3ad1fe80db069ddb8cc2fe001128480101897e0d5f6948d0ebfd6059f7ce4a9d302f003387f550bc111eaff29a00fd3f6a0011221301009260718f0e824a68009c009d28480101a6c30a7e81a2e235344d60e25deb529ea81ecaaf18ba7ad4d1094ad4e688dc3b001022130100926070eb0af17808009e009f21a1bcd999999999999999999999999999999999999999999999999999999999999820124c0e1d1c7de6e8e9e47b3597f7d8d286d471569e0d9c491d328f412869919033ccba6355cf71b6000039100b30af8500a02848010150725eee52e86432f846698a08ac153a67bc9ad9c160130af907c3bef05f29480007227bcff3333333333333333333333333333333333333333333333333333333333333333413a0c19daa00000000000000722016615f0e0124c0e1d1c7de6e96d000a100a2284801016217f872c99fafcb870f2c11a362f59339be95095f70d00b9cff2f6dcd69d3dd000e22556c05abc35f2d28c653f4265d7dcb8fc92bed13e967a0e185f076ece6d1737124680ec79228cc47939e7c7900a300a4284801017beaf3d626ff1c1157c3256086eaf65e4c5cb36f1e06fc4bff5c254d0afe11e1000822058f632900a500a6284801015760bd8f1523c626109fac6ebd27fdd41c13ff9b4ac77b2cd0d0e5db35fe115b00192175a1f426c656f426000100005d7dcb8fc92bed13e967a0e185f076ece6d1737124680ec79228cc47939e7c7980211b20313a0e2b76056d6a98791b4000a7284801013381db8de42ac7bd1c86e3b9260a0a4c3dba0eeedd0948411fe87f8e61cb7a2b000a221100f6a2a9ced4e7832800aa00ab28480101a72253058d44c955a033c71df4919a8dfd898ba5d7611e82899917b98adb74f90016221100ea5909416d75008800ac00ad2848010134678a4d0882ec396f4ff31c1e08e1d15cc43920feef83982ecc53f8b33e3ff90012221100ea59006153ba044800ae00af284801017766b904a739f3f20b86f6a21a58fec2d372a9215b045465563591bc9fcf563c000b28480101e2bc337ece7f3af5171f3265f44c612fc2fcba87f4b4563dc7fdc3285dd6a44d0008220f00c03929383c0e0800b000b1219bbd62f8f7bea30f8ab5e9f16c3fb8642b118f56ed1bdc49600dbe5220c8b1af9e040c474f8043bca7e05a807129637f861fb26fdb0cd8f87a0abd139aba7c2488095826b3e580000e4402cc2be1c000b22848010167cade27e6bad58c3a0788275bb5209fa153b02e410162e9f1eed3225f858b9b0007236fcff34517c7bdf5187c55af4f8b61fdc321588c7ab768dee24b006df29106458d7cf21881f480000000000000722016615f110311d3e017f000b300b400b5284801017269fb9feb45d719ebdbc3b0816b987bab06f43378dc84dc84d55727905482140002004811fd096c000000000000000000000000000000000000000000000000000000000000000028480101986c49971b96062e1fba4410e27249c8d73b0a9380f7ffd44640167e68b215e80003284801018c3d1f497f640f7231832c2db4c305c7d09956604969ff78626ebcabdfe3c204001022bf0001160c6a16000569346000039100b122b0880000e43c24e296200b4b22e4796fc4ec243fb2fddf46ce115effefd5bb9af7df7ac5ef7c9703e7bcb929c3da260e902c842df1bb88fb0462fbc104fb2acec96c7ae9f60a96baede1e021f8b8be00b900ba28480101b20e36a3b36a4cdee601106c642e90718b0a58daf200753dbb3189f956b494b600012213c3c0000722016245612000bb00bc22012000d300d428480101258d602eaa21d621634dcf86692aeae308ff3cf888f3edafc6a5b21848d732f900182211480000e4402c48ac2400bd00be284801014b01ebcf5425735461aa8b83bae89e70fa21e95d2ee85e57b05dad26c1d6d530001622112000039100b122b09000bf00c02848010165b0a85a0fdea0c76a2a98445623ea62427099a6318624794dea416f1bdc6f5c00152211480000e4402c48ac2400c100c228480101cce04453b5ebd066ec571f97e2c381ff3869760c73e49bc875e1c7558fa009830013221162000039100b122b0900c300c428480101943eb6e1a8ab6d59084e5c02d47fb6d1df070a97ea38aac1cd0c2642ccc1fd5a00102211480000e4402c48ac2400c500c6284801017cafaec516263926c8a4b3688a00799a4295f1ec29895c2e425802ca10a4eb8b000e22112000039100b122b09000c700c82848010148863971820997c09f712d4610ce3922359e7080191e30da8193bb06a46ab1b1000d2211480000e4402c48ac2400c900ca284801015ef0bea8e1ca990b2c112458ff12a184ea718b4db8b7f36b9dc9717e4597bf84000b22110000039100b122b09000cb00cc28480101b41cec6db88843c0c575e079a030926c1cf6e1297ceeb70bdd35b545fe91bf66000a2212ca00001c880589158400cd00ce284801019d6113c263e5bde09493cc2ba94af44e2a0e42a4773af83c1c6681c9f97c85e20004221160000039100b122b0900cf00d028480101ece24ee394a769c5547ecda44f1ba72c58c8b0a2c667dd1c43ff1af218c22a47000102110000039100b122b09000d100d200a90000039100af3a68800001c880579d34401696c124882d4eb73da04b3fde61e6dd87123af44926de597ba9e2fd03a48e0e3ded8d2f61e684490b27dd56b96348fa3bfe6ee446beb10de99ae46817468debdefbb38800a90000039100b122b0800001c880589158401696c13a844436ae5d8bda80868a05a061a2d86323220e08249293d915805d944b9243796be33bda64aa44dac4602e96f76c7e25fb44815cecfb8e5616f6c961a58bc66822012000d500d632017c6238b11c984a83dc898966b60817d559089fb10de18af693cbb75f8247664df5ce72d18ed7454d2631a4c030032533ea388a9c2a1e749cbc6bcfed7a9a74e1000f000e2000eb00ec22012000d700d828480101a05331025089c688c8198fd10c0569803d46b4ff7e6d3b31153994ce24718036000e22012000d900da28480101f97df6fed140b9778faa234d338c175662e7d0a7c6139548685afc5fd3acf53d000d22012000db00dc284801016c7cf2d789fe3cf0c94f8193943fcf7bf4378c6a5f714ed2a1c2ddab241c27d7000b22012000dd00de28480101def108425d418746e8e01c567928eb28a5ae688fc98ff8a486bd6df01c3b317e000a22012000df00e0284801010596d5f8a8dd5c371d2578a1201daac95cbe117209820c555ab3589726de7ef6000922012000e100e2284801013a7fdd70f538f3f2af484814f690882d893c7881c245a4c3658b80b886093707000722012000e300e4284801012c3613a6783c9037f33c86754e25644263e194b89e8eaef744af36558ebca1ec000622012000e500e628480101e2fd690fda3693c29700fc8efbb58b494abaa9bda64658f7ce0e6263085cbdb6000522012000e700e828480101cd58033884f82d823d2e0c6681ed0efd059c0968967d26c69977e6ae3b9c823b000202012000e900ea2848010187c4b6012c6d7e54b34a1b9e61c34aabe53b4422831ff6737cbc8b88d742ee6400020073de88c6542aae0000000002d2d8260000048cb4bc960e000091b685f3a55cc6542aae0000000015825616000004c73bb5b14c00009ac03952011900b1bd26c4bf67a7369807507b096d1e5391c271b504ddd7f122d739ef87fc7dfb3d18c67e64400000000000003340000001cffff0b9400000208d9166c798c67d700000000000000023c000000152cdabedc0000016da450b336022012000ed00ee28480101f40b0b01e83fd55e4fd51fa4fc57f29e64495485ba4667ba1b6655b4deae9709000e22012000ef00f02201200103010422012000f100f228480101cb47ab2e5efc77e1c19c247eb406c2dc1ee4048df7f4b51e4a64ecedced71622000c284801016ff2371c8b714cf6ac0521afa7eb180e95910468104751bb7eed178e01da3ec8000a22012000f300f422012000f500f6284801014c7d80c18e7f201a6b3e13d2d18cc8263daa19d50d3cfd9d88511fd4c8883b91000a2848010150163f0bce25531c0ebfa63609767fad5fcb8440ecb4b37ffc5b7729f29d1f52000822012000f700f822012000f900fa284801019cfc1c2354db080cd953f0d89f05599e0e0467c11a22e120984a8ac5bc08011c000622012000fb00fc28480101c5cd95841a0bd8c3a6393f532588de4036d427c93d5ff1a38666fa94f335a4ef000522012000fd00fe2848010154365b0e1df52dedfceb9b9b5f3c9cf5f0ee5b6b0a075712517022c0e54a2e4f000428480101d4b40ef831eaf33420007439d664f4a0a6cf927ece2a1f5df462a26531fc90a2000302012000ff010000b1bd2805339eefdcf7d918fe89c02e0aa38babeea7d1cc563633e5103e5488227518c73e82800000000000002f8000000161f34d7fc000001e12afccbf18c73780800000000000001540000001425244a24000000d8cbcba19200201660101010200afbc46e94ee499ba4c97ea74eb6801fbaeb4ac51384361e573254a7edc525a7aa8c63bf3c400000000000001a20000000bf2cb0b8e0000010606b271aac63be69a00000000000000c40000000caec2108e00000084360cb43500afbc5a38b82c592a9a7d002154fca6a76fb973ad84142a0849cfcecff4c1af586800000000000000000000000000000000000000000000000000000000c6542aae000000000000001000000008fb0b601c0000000f93f9d9d12201200105010628480101559d47d01d635c2c30249e5b69844b8e97cbd6b8c7fd1d946ba6cf1eb166c165000c22012001070108284801013c487ae8d2f65546a569b31f2e265b33a88d1577963feb6340ec94259476a7fc000b2201200109010a28480101f7bcb11eb947ebb7724f49440559f75fa0c3fdc05a2f182afdea5f5d0be2c6070009284801012de4928300fc3835575030950d3fc4f54f30a882a80bc1b782d5dd1ca06d93a60008220120010b010c284801013b99202bec9c46af891dc82f5e85994c4ee88265024386c9ca25b8a28346e8bf0006220120010d010e220120010f0110284801016c95748264f7fc06f07979ae935767052b30bff9c045ed9e0474baf1442c7c9c00052848010175ee3cd2b5731432d0fb57bd0dd877b500de0fb39a0a69d2c798c38f3de3e297000522012001110112020120011301142848010146cce5dfa3dc5a38b9051b1feedc407e30b0f4185bef1e3296a052373d6d23af00020201200115011600b1bd30904ed2d9b54d4ea9acbb08224b09ef86a3d66c9673eefeea88546431f4f90000000000000000000000000000000000000000000000000000000018c6f4d5800000000000001240000000ed787848c000000cc8a8d5af6000b1bccab79c5ee7c0db770d80430646b30e66e923b97536c0044f4e44d02012d4ca00000000000000000000000000000000000000000000000000000000318bfa82000000000000002d0000000176f8442c8000001aca061169400201200117011800b0bc9fea53e5abf14168b6f89d41f88a0564523c98c7780f2f514464f0c59889f4000000000000000000000000000000000000000000000000000000006315e8d1000000000000006500000004a843d35c0000003edeb280960201200119011a00afbc58c37a847ca490abb195a8fd9e9d86c105d30f86c31f9f07b2e3da96c5856800000000000000000000000000000000000000000000000000000000c62be2c600000000000000760000000751e34286000000546377e83500afbc7233f71a01a68966843924cf3d83d76889ae1277d76bba260ea0330a9fb268c6542aae000000000000002a0000000bd07cea7600000027dc58b0bcc6541da6000000000000003400000019a36213b400000032770a530501038020011f00010211015ca6998b4b25f2fa4dbf8843c49a6b5bb8fad7b99d986a3b82f44ba70250bdae00078201270317cca5687c07414843b9aca0040120012101220247a002726d085b71b5444e21e5c99ba6949a843c08d7d1ba3e1c6ae9da5c0899e4d7400610012601330103d0400123003fb000000000400000000000000021f01d05210ee6b280087c07414843b9aca004010150012501db500de0e3f80b4b60a00000e4402c48ac000000e4402c48ac302f04343f99a53f1e3438f8be869b34e2cc728789194d15913fd06bcc9d9f65babaf2338c9d6ffc7123e6d3c3aa3d7bab65ad7c4b9b09b5a839f948063d20361080002b504400000000000000000b4b608b1950aa920124001343e03a0a421dcd6500200201610126013301064606000137020340400128012902037604012a012b0297bf955555555555555555555555555555555555555555555555555555555555555502aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaad000000722016615f0c1014401460397beb33333333333333333333333333333333333333333333333333333333333333029999999999999999999999999999999999999999999999999999999999999999cf80000722016615f0040012c012d012e0397be8517c7bdf5187c55af4f8b61fdc321588c7ab768dee24b006df29106458d7cf029a28be3defa8c3e2ad7a7c5b0fee190ac463d5bb46f71258036f9488322c6be7cf80000722016615f00400139013a013b01035040012f0103404001330082728e05a2ad38072202098b99990e8c1766429f4a295704e56c879557ecf9002263a80f1f950f6b43fac49fc4592b525847b40fcd8348797a40972943a7f59cb79303af7333333333333333333333333333333333333333333333333333333333333333300001c88059857c1a0fd7148bdb9616164326ace8073a3d6a00d9ce04e1e2848e002142d4529986600001c8805891582632a155700014080145013001310082728e05a2ad38072202098b99990e8c1766429f4a295704e56c879557ecf9002263f01f4e51a95a5c9ad348fb0e1be2d05ef0a0ca145d99be414bbc8f5620590c0e02052030240132014900a04453b004c4b4000000000000000000b50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003af7333333333333333333333333333333333333333333333333333333333333333300001c88059857c2bcd9006df8d36479a4ea88e38621529793fb1e48fb529b5eab68aa10f6ce37a200001c88059857c1632a155700014080134013501360101a00137008272f01f4e51a95a5c9ad348fb0e1be2d05ef0a0ca145d99be414bbc8f5620590c0ea80f1f950f6b43fac49fc4592b525847b40fcd8348797a40972943a7f59cb793020f040928d5e46918110138014900ab69fe00000000000000000000000000000000000000000000000000000000000000013fccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccd28d5e469000000039100b30af80c6542aae40009e42af6c10b9e80000000000000000640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001035040013c01035040013f00827213f3ab5fcb91bfb420b3296582f796c77cfcf77a18ed28729684a7bdd550fa929e91d1624e79eb5cae6064a35d7dbafcc5bca0c93b0ba39155b4747706e100fe03af734517c7bdf5187c55af4f8b61fdc321588c7ab768dee24b006df29106458d7cf00001c88059857c1aea7f7414ec92f8fc78fb94343ea22552d32f32f5d7a364ac7c411c30c8b490d00001c8805891583632a155700014080145013d013e00827213f3ab5fcb91bfb420b3296582f796c77cfcf77a18ed28729684a7bdd550fa92fd6f12eb7a597d678a70eda6092ace6998cd57e0a18aae330808c0bc29154c1202052030340142014303af734517c7bdf5187c55af4f8b61fdc321588c7ab768dee24b006df29106458d7cf00001c88059857c395cb0fe13a523a939fb18e03da92616b909c77096b78a1580bf4585cd14a7bb400001c88059857c1632a15570001408014501400141008272fd6f12eb7a597d678a70eda6092ace6998cd57e0a18aae330808c0bc29154c129e91d1624e79eb5cae6064a35d7dbafcc5bca0c93b0ba39155b4747706e100fe02053030340142014300a042665004c4b400000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000069600000009600000004000600000000000519ae84f17b8f8b22026a975ff55f1ab19fde4a768744d2178dfa63bb533e107a409026bc03af7555555555555555555555555555555555555555555555555555555555555555500001c88059857c302b610d0991cb08ff40f45d068de2c6b3c81bfaf817443a05d3bd09653534aec00001c8805891583632a15570001408014501460147000120008272e9d1638ebe1916901165a1767910893b1e35c6414b42afc9427f9ed88288573c3104b2cd5d91d77731603fc6bfb7e3a9d9e545e3ce3345dfa07698bb9676912a02053030240148014900a041297004c4b40000000000000000002e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bc00000000000000000000000012d452da449e50b8cf7dd27861f146122afe1b546bb8b70fc8216f0c614139f8e0451e13e98")
	
	boc2 = bytes.fromhex("b5ee9c7201028a01000f180003b571c8f119834f94290def0957a0b5a6bf4bd9058321644ad95ef24bc5e72bdf990000020c7ca066f0300000000000000000000000000000000000000000000000000000000000000000000000000000000641063300001c62a82d080102030101a00400827290aec8965afabb16ebc3cb9b408ebae71b618d78788bc80d09843593cac98da4b0bd94d633b8b2e45c25fde8b1352004e31cd9bd40426797782ed082179c22450215040903b9aca01862a82d111e1f04b368007ceb454d9c98f33966149f1d721fff5d9438400a625ce18f657be316fe63d0b5000723c4660d3e50a437bc255e82d69afd2f64160c85912b657bc92f179caf7e64103b9aca00080303cba20000418f940cde04c820c6611905060e070114ff00f4a413f4bcf2c80b08008404003e75a2a6ce4c799cb30a4f8eb90fffaeca1c2005312e70c7b2bdf18b7f31e85a15d99b10ce8fa22d022c013f7f744564695264265ffaa902c24a610f6a4168ec02c380001ff3fbb167701ae1d1d4e69a4c5ebc37a98309866a6b7e6321bace810c53cf500000000000000000000000000000000000000000000000000000000000000c80000000000000000000000000000000000000000000000000000000002faf0802090a0046d3ed44d075d721fa408307d721d102d0d30331fa403058c705f288d4d4d101fb04ed540101c00b0201621a1b0201200c0d0105bd8974200105bf5ebc0e0114ff00f4a413f4bcf2c80b0f02016210110202ca121302012014150201204142020120595a0111bdad9ed9e2a81f81845302012016170201581819010db8196db3cf031853010db1acb6cf3c0ca053004db2f4609c173b0f574b2b9ec7a13b0e7592a146d9a09c27758d4b4ad91f2cc8b4ebcb7f7c588e600201201c1d0083bfb1749396e50422deafd90f10287d3f973f88ebdc61711ae49dffc52dac285e700000000000000000000000000000000000000000000000000000000000000019400082bf6d5c807e33e28b204659581ae3122cf720ec896e5e3213ee4bb9de2207f9cb8e00000000000000000000000000000000000000000000000000000000000000af0082bf56f2904a7be2b807411872692e3cf85071fe3221ba685bedf8773df123c9c98e00000000000000000000000000000000000000000000000000000000000000af009e40ae2c0f424000000000000000001b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bc0000000000002000200000000359b2e775d6e07513a1fdf5fecad9ee4976834d81246b96b473809b780026bd6040114ff00f4a413f4bcf2c80b2102016222230202cb24250201203d3e0201ce26270201202c2d049b3b68bb7edc0875d27087e54c0835c2c7f780b434c0c05c6c3000645fe45c38807e900894199bc13e1840a456f8082084251aa62daea3e4cc36cf01b6cf0c44158411440d104c3c06f6cf383000203f282b29000b081bbcb420200020d31f018210946a98b6baf2e081d33f0103be8fd7f9012082f0cc49ce12f102c48470d91cfdfed07d9c8207f1338503bbd19198632e6c84e5b9ba8f0930db3cf019db3cdb31e082f0cb30be6318277305456e98f5e118901f7631cc861491d5a0f6da402bde50286abae3029130e2f2c0823f2b2a0210db3cf01adb3cdb313f2b0118c8f84201cc5550db3cc9ed546b0201582e2f02014837380201203031020120333402f7321c4072805401c072801c007280940173c59400fe809c00729a08dbacc95bacec63919fc07280321c0072801c007280091bace69fc07280013c00540133258d00dc00728038891bace69fc07280013c00540133258d00dc007280389c007280009fc0728000b2563325ccccc05c00728038885bacf8c3f2407ec020326401411c3232c7dbc0005be31b5be30076cf1bc8807264c85bace5805bc89673327a0c607000127f01ca0001f00101cc011f1c1c20402808f6cf0a55481b5b7c05203500351c1c20402822e95195c9b5a5b985d195923c054a55481b5b7c0520010ac801db3cc9360016821017e7b8d358cb1ff400020120393a0201203b3c000517c16000cb3e105bc90408d7c0fe9120802b4580b00004bcbd204040551580148c104cfd031be8650075c00c2496db78a0802204485bacfcbd204ad70070c03cbd00e92040405c0844120408c409885ba556d67d168c26320073c0104cfd10b894c8efa5013c058137812000cb3e105bc90408d7c0fe9120802b4580b00004bcbd204040551580148c104cfd031be8650075c00c2496db78a0802204485bacfcbd204ad70070c03cbd00a92040405c0844120408c409485ba556d67d168c26320073c0104cfd10b894c4efa5013c05c137812000030c20010dbe28eed9e780c43f0071bdde8c1382e761eae96573d8f42761ceb25428db341384eeb1a9695b23e599169d796fef8b11cc13820673ab4f38afce928580eb0b71323d940116ed44d0d401f862db3c6c16400046fa400101f404810101d700810101d700d401d0810101d700f4043010261025102410230201204344020272575802014845460011b8b3e81adf43b860db049f4eda2edfb7021d749c21f953020d70b1fde02d0d3030171b0c001917f9170e201fa402250666f04f86102915be020821017e7b8d3ba8f8f30db3c04db3c3110344130f033db3ce020821013ff04dbba853475448000b4206ef2d08080020d31f01821017e7b8d3baf2e081f4040104388f9130db3c04db3c32104510344300f034db3ce020821023d421e1ba5349544a0024d31f01821013ff04dbbaf2e081d33ff4045904348f8f30db3c04db3c3110344130f039db3ce020821074bb3427ba534b544c0020d31f01821023d421e1baf2e081d33f0104288f8f30db3c04db3c3110344130f03adb3ce0c000534d544e0020d31f01821074bb3427baf2e081d33f01010e9130e30df2c0824f04f8f9012082f0088498875f54c5f944f42d323f454dea2c39c21a7288b107cfbf31c5746228dfba8f0930db3cf035db3cdb31e02082f0c1c11d1f7fd92f290d981a0199b5192a8987f40e1ee7bf341a386bae13dbc5e5bae3022082f0250b76e2b9576fc6b4c45129483006b0003a0c39b6f7ae413d177f4e3479dbcaba53545051021230db3cf036db3cdb31535403628f0930db3cf037db3cdb31e082f005a0b75ac6180d673399ec546c374c22ad7b54bfcf16d736fc78e9e173d87372bae3025354520210db3cf038db3cdb3153540116ed44d0d401f862db3c6c14550118c8f84201cc5530db3cc9ed54560024fa400101f404810101d700810101d700553000225043cf16f40012810101cf00810101cf0000df3208704026200b4072c1c068c07788608e0c9f2c9cd04674edea6a876e63881c081c6385011eaa43298c096a04a8012a81c0a9087000114c398c0cea80b3c0638adbc01c238448deaa42049be3006900deaa4108300005398cc8a940e714c09be0698c1632c1c0a956790c0c78b2742000db0830404870936c7cb421b208b04026200b4072c1c0a8c0b79fdc1bc0012386c11eaa43083000148c2c2ce6dc0ce98c051be301290100e44c388139006ce5c0a00b9be300a937a38400deaa43298c04dbe300e908b000040d398cc8a940e694c49be04072c1c0a940b91b087274200201205b5c02012071720023ffc21b74bfc12fc0abffc31ef10d0fc08d040201205d5e0201205f60020120676802012061620201206566004b1c16721c0072c05cc072c05c0072c004b333327e40321c8072c05c0072c004b281f2fff2742002f7321c4072805401c072801c007280940173c59400fe809c00729a08dbacc95bacec63919fc07280321c0072801c007280091bace69fc07280013c00940133258d00dc00728038891bace69fc07280013c00940133258d00dc007280389c007280009fc0728000b2563325ccccc05c00728038885bacf8c3f2407ec020636400127f01ca0001f00201cc000a317001ca000005327420001f1d3232c084b281f2fffc0abe90004c60020120696a0201206c6d00071e7c056001191c1481b23301840d1636cf32606b003a5065cf1613f400810101cf00810101cf0002c8810101cf00f400c901cc004f01343d010c1b40604c4b8060043d03dbe87cb821c0604c4b8880a0043d05f23d0032554c017c0b60013108aa4108aa083040644c3808e040407d211be96422ba17c0e06e046001f002810101d700307022f002f02b70c8cb1f6f00016f8c6d6f8c22f014db3c8b12f8db3c26f014db3c8b4206f662087070706f039adb3c24f02cdb3c8d05c80a1dda185b195cc81c995d995b9d59481cda185c994a60db3c705357a9045004a870026f2201c993216eb396016f2259ccc9e831126d6df029f00224810101f4786fa570707000ba20d74a21d7499720c20022c200b18e4a036f22807f22cf31ab02a105ab025155b60820c2009c20aa0215d7185033cf164014de596f025341a1c20099c8016f025044a1aa028e123133c20099d430d020d74a21d749927020e2e2e85f030201207374020148868702012075760201207d7e0201207778020120797a00470d16c07e910c60404059904cfd031be8650075c00c2496db78a050d9485bacfcbd3c00a000450408d7c0dc086040407d211be94ca440678069007c0088a040407d1e1be94cba0c0c6000133c0c5cea75801cad8260029f3e105bc90408d7c0fe10be0a151dd949fc0c94dd3c0b806080209040bc0a04b1c17cbd1c2040405518887c0336cf24c81bace3a6081bbcb4201bc94510cc1b5b7c0a690860404048bc0336cf3a17c0e07b7b011a206e92306de0d0db3c6c156f057c0026fa400101810101d700810101d700d200d455400201207f82020120828301ad3e105bc90c0cbe910c60404054c1d40cd04cfd031be8650075c00c2496db78a050d9405bacfcbd2080309a406084017d78402f3cbd3e10be0a151dd949fc0c9540949c3c0b973c0a1c1c201001b6cf178c900cc13c0a6080010ac801db3cc98100168210946a98b658cb1fcb3f00012001b93e105bc90408d7c0fe910c60404054c1140cd04cfd031be8650075c00c2496db78a050d9405bacfcbd204e603e09dbc408a86084017d78402f3cbd1c1c48208c40000000000000603c09e0840ee6b2801c36cf1b5b4a1451910d3c0a6084010cc85520db3cc98500268210da803efd5004cb1f12cb3f01fa0201fa020201208889002f430f8416f24135f03821005f5e100a120c1019130e0f02f8002d3e105bc904d7c0e084017d784028483040644c383c0be0002f0c3e105bc904d7c0e084017d784028483040644c383c0be0")
	
	cells1 = deserialize_boc(boc1)
	print(f"cells1: {cells1}")
	cells2 = deserialize_boc(boc2)
	print(f"cells2: {cells2}")
#end define

def test_tvm():
	global_config_url = "/usr/bin/ton/local.config.json"
	adnl = AdnlTcpClientWithBalancer(global_config_url)
	accoun_state = adnl.get_account_state("EQDeyWNhx_32hP6KlPYdWA8hov28_8XBScTlyz_6YZc-aqNs")
	message_cell = Cell(bytes.fromhex("0AF667A99CA0CBCC036EAF9094450F56EDDA12879C3A1F89D8E9F1D875CA43990D8CBB9D96B5F915D39461DBD8AF04440FF10CC73F475265AC4B2C1B143138000000000103"))
	message_cell2 = Cell(bytes.fromhex("627FA08D8AABA06112661A477E0409F1CE4F93E2F07B041903087C73E774D64F8BDA987A120000000000000000000000000000"))
	message_cell.add_ref(message_cell2)
	
	import hashlib
	from nacl.signing import SigningKey
	priv_key_bytes = bytes.fromhex("c166215045844e6b9d1b3396e18af7ba4616e1f70d340fb81ac14647e8dfe97c")
	hash_bytes = bytes.fromhex("7f7cd050cca0573a113a12c85965765a0a091c1f95a95b605dd3b1933ffe49fe")
	hash_bytes2 = hashlib.sha256(hash_bytes).digest()
	signing_key = SigningKey(priv_key_bytes)
	signature_bytes = signing_key.sign(hash_bytes)
	signature_bytes2 = signing_key.sign(hash_bytes2)
	verify_key_bytes  = signing_key.verify_key.encode()
	print("verify_key:", verify_key_bytes.hex())
	print("signature_bytes:", signature_bytes.hex())
	print("signature_bytes2:", signature_bytes2.hex())
	print("hash_bytes:", hash_bytes.hex())
	print("hash_bytes2:", hash_bytes2.hex())
	print("cell_hash:", message_cell.hash().hex)
	
	tvm = TVM(accoun_state.storage.state.code, accoun_state.storage.state.data, message_cell)
	tvm.run()
#end define

def test_cell_hash():
	cell_boc = bytes.fromhex("b5ee9c7241010101000a00000f00000000000000dfabfb4138")
	true_cell_hash = bytes.fromhex("5ab26fa9292eb08bf90b95532c83ece61380e1bd6b04ea2125202b2cab17035d")
	cell = deserialize_boc(cell_boc)
	cell_hash = cell.hash()
	cell_json = json.dumps(cell, indent=4)
	print("cell:", cell)
	print("cell_json:", cell_json)
	print("cell_hash:", cell_hash.hex, cell_hash==true_cell_hash)
	print("--- --- ---")
	
	cell_boc = bytes.fromhex("b5ee9c7241010401002b00010f000000000000061301010f000000000000029b02010f000000000017910703000f00000000000000df71dae7b7")
	true_cell_hash = bytes.fromhex("bb2509fe3cff8f1faae19213774d218c018f9616cd397850c8ad9038db84eaa9")
	cell = deserialize_boc(cell_boc)
	cell_hash = cell.hash()
	cell_json = json.dumps(cell, indent=4)
	print("cell:", cell)
	print("cell_json:", cell_json)
	print("cell_hash:", cell_hash.hex, cell_hash==true_cell_hash)
#end define
